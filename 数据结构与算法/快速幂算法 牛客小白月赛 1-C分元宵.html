<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Francis-xsc</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/img/favicon.ico">
    <meta name="description" content="徐思崇">
    <meta name="author" href="Francis-xsc">
    <link rel="preload" href="/assets/css/0.styles.6b7c271b.css" as="style"><link rel="preload" href="/assets/js/app.a5ec0a2d.js" as="script"><link rel="preload" href="/assets/js/2.785c97dd.js" as="script"><link rel="preload" href="/assets/js/20.602915c9.js" as="script"><link rel="prefetch" href="/assets/js/10.ad541554.js"><link rel="prefetch" href="/assets/js/11.4ef84df1.js"><link rel="prefetch" href="/assets/js/12.a78e1bb6.js"><link rel="prefetch" href="/assets/js/13.9b030b75.js"><link rel="prefetch" href="/assets/js/14.a417bbc1.js"><link rel="prefetch" href="/assets/js/15.ecabb56f.js"><link rel="prefetch" href="/assets/js/16.216857e5.js"><link rel="prefetch" href="/assets/js/17.dde2a7cb.js"><link rel="prefetch" href="/assets/js/18.04704f8d.js"><link rel="prefetch" href="/assets/js/19.7f14631d.js"><link rel="prefetch" href="/assets/js/21.98bfad00.js"><link rel="prefetch" href="/assets/js/22.01a3eb25.js"><link rel="prefetch" href="/assets/js/23.48ede5bc.js"><link rel="prefetch" href="/assets/js/24.97e54fe0.js"><link rel="prefetch" href="/assets/js/25.41e29e25.js"><link rel="prefetch" href="/assets/js/26.798a511f.js"><link rel="prefetch" href="/assets/js/27.99bf2ebc.js"><link rel="prefetch" href="/assets/js/28.893b543f.js"><link rel="prefetch" href="/assets/js/29.5a462b04.js"><link rel="prefetch" href="/assets/js/3.bff38b48.js"><link rel="prefetch" href="/assets/js/30.606c4725.js"><link rel="prefetch" href="/assets/js/31.3c34f459.js"><link rel="prefetch" href="/assets/js/32.7a04a839.js"><link rel="prefetch" href="/assets/js/33.f0160151.js"><link rel="prefetch" href="/assets/js/34.33a3b310.js"><link rel="prefetch" href="/assets/js/35.508b6360.js"><link rel="prefetch" href="/assets/js/4.71453c45.js"><link rel="prefetch" href="/assets/js/5.5fc371a9.js"><link rel="prefetch" href="/assets/js/6.42ef6059.js"><link rel="prefetch" href="/assets/js/7.2febbb17.js"><link rel="prefetch" href="/assets/js/8.5566e199.js"><link rel="prefetch" href="/assets/js/9.ec62d861.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6b7c271b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Francis-xsc" class="logo"> <span class="site-name can-hide">Francis-xsc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/数据结构与算法/大话数据结构/" class="nav-link">
  大话数据结构
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/哈学院算法培训/" class="nav-link">
  哈学院算法培训
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/快速幂算法 牛客小白月赛 1-C分元宵/" class="nav-link">
  快速幂算法
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/数据结构_邓俊辉/" class="nav-link">
  数据结构_邓俊辉
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/数据结构_学校/" class="nav-link">
  数据结构(学校）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/语言/文件读写/" class="nav-link">
  文件读写
</a></li><li class="dropdown-item"><!----> <a href="/语言/哈学院算法培训/" class="nav-link">
  哈学院算法培训
</a></li><li class="dropdown-item"><!----> <a href="/语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/语言/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/语言/python-北理工/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">乱七八糟</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">乱七八糟</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/乱七八糟/乱七八糟/" class="nav-link">
  乱七八糟
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/虚拟机安装凤凰OS/" class="nav-link">
  虚拟机安装凤凰OS
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/国内访问GitHub/" class="nav-link">
  国内访问GitHub
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/Markdown/" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/软件工程过程/" class="nav-link">
  软件工程过程
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/WindowsTerminal/" class="nav-link">
  Windows Terminal
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/IDEA/" class="nav-link">
  IDEA
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/数据结构与算法/大话数据结构/" class="nav-link">
  大话数据结构
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/哈学院算法培训/" class="nav-link">
  哈学院算法培训
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/快速幂算法 牛客小白月赛 1-C分元宵/" class="nav-link">
  快速幂算法
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/数据结构_邓俊辉/" class="nav-link">
  数据结构_邓俊辉
</a></li><li class="dropdown-item"><!----> <a href="/数据结构与算法/数据结构_学校/" class="nav-link">
  数据结构(学校）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/语言/文件读写/" class="nav-link">
  文件读写
</a></li><li class="dropdown-item"><!----> <a href="/语言/哈学院算法培训/" class="nav-link">
  哈学院算法培训
</a></li><li class="dropdown-item"><!----> <a href="/语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/语言/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/语言/python-北理工/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">乱七八糟</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">乱七八糟</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/乱七八糟/乱七八糟/" class="nav-link">
  乱七八糟
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/虚拟机安装凤凰OS/" class="nav-link">
  虚拟机安装凤凰OS
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/国内访问GitHub/" class="nav-link">
  国内访问GitHub
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/Markdown/" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/软件工程过程/" class="nav-link">
  软件工程过程
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/WindowsTerminal/" class="nav-link">
  Windows Terminal
</a></li><li class="dropdown-item"><!----> <a href="/乱七八糟/IDEA/" class="nav-link">
  IDEA
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>牛客小白月赛1的C题</p> <blockquote><p>链接：https://ac.nowcoder.com/acm/contest/85/C
来源：牛客网</p> <p>毕竟是元宵节，晚上还是要吃几个元宵。 Etéreo 家可是个大家庭，元宵的数量，甚至是餐具的数量，都多的惊人。现在，爱数学的 Etéreo 又来问你有趣的数学题了，快来秒掉它！  Etéreo 家里有 ς 种元宵馅， ϑ 种元宵皮，每个元宵可以选择任意一种元宵馅和任意一种元宵皮。同时有ϖ 张桌子，每张桌子上放了 ϱ 只碗，每只碗能放一只元宵。每只碗都要装一只元宵。Etéreo 会告诉你 ς,ϑ,ϖ,ϱ 的值，想请问你有多少种装元宵的方式。答案对Λ 取模。
两种方式被认为是不同的当且仅当至少有一只碗存在于两种方式的同一个位置但是里面有至少一个元宵不同。
两个元宵被认为是不同的当且仅当元宵馅不同或者元宵皮不同。
碗和桌子都是有编号的，但是你不能改变碗或桌子的编号。
你可以认为碗和桌子都是固定的，你只能改变元宵的种类和位置。</p> <p>0≤ς,ϑ≤10<sup>18</sup>
0≤ϖ,ϱ≤10<sup>6</sup>
1≤Λ≤1,000,000,007</p></blockquote> <p>这道题看起来不太难,首先有ϖ*ϱ只碗，元宵一共有ς*ϑ种，所以最后的答案为(ϖ*ϱ)<sup>ς*ϑ</sup>种，再对Λ取模即可</p> <p>但是指数的结果是非常大的，没有数据结构能存下，而且指数过大，很有可能会超时，那么如何解决这一问题？</p> <p>快速幂</p> <p>字面意思，就是快速求幂</p> <p>先写一下最简单的求法吧。</p> <p>在最开始学习C++时，我们首先接触到的方法是cmath中的pow函数或者循环计算</p> <p>例如求2^10</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        ans<span class="token operator">*=</span><span class="token number">2</span><span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span>ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>pow方法简单，但是效率比循环要低。</p> <p>循环效率也不高，计算一个数字的n次幂，就需要循环n次,复杂度为O(n)。</p> <p>做最前面的那道算法题时这两种办法肯定是不行的，如何优化？</p> <p>例如求2^8</p> <p>2<sup>10</sup></p> <p>=2*2*2*2*2*2*2*2*2*2</p> <p>=(2*2)*(2*2)*(2*2)*(2*2)*(2*2)</p> <p>=4^5</p> <p>这时我们需要循环的次数就减少了一半，只需要五次</p> <p>这是我们的第一次优化，可以发现，底数变成了原来的平方，指数变成了原来的一半</p> <p>如果是10000次循环，经过一次优化就变成了5000次，优化的程度就很大了</p> <p>继续这么优化</p> <p>4<sup>5</sup>=4<sup>2.5</sup></p> <p>就发现一个问题，如果是奇数次，指数除以二之后出现了小数部分，那么如何解决？</p> <p>提出来其中的一个，指数又变成了偶数</p> <p>4<sup>5</sup>=4<sup>4</sup>*4<sup>1</sup></p> <p>那么就可以继续优化了</p> <p>4<sup>5</sup>=4<sup>4</sup>*4<sup>1</sup>=16<sup>2</sup>*4<sup>1</sup>=256<sup>1</sup>*4<sup>1</sup></p> <p>所以这个算法的思路是</p> <p>首先与循环算法一样，定义一个结果变量result=1</p> <p>如果指数是偶数，那么底数平方，指数除以2</p> <p>如果指数是奇数，那么提出来其中一项并乘进结果中，指数减一
复杂度为O(logn)</p> <p>代码如下</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>	<span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fastpow1</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> base<span class="token punctuation">,</span><span class="token keyword">long</span> <span class="token keyword">long</span> power<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>power<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>power<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                base<span class="token operator">=</span>base<span class="token operator">*</span>base<span class="token punctuation">;</span>
                power<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                result<span class="token operator">*=</span>base<span class="token punctuation">;</span>
                power<span class="token operator">--</span><span class="token punctuation">;</span>
               	<span class="token comment">//此时power变为偶数，可以进行与power为偶数时相同的操作</span>
                power<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">;</span>
                base<span class="token operator">=</span>base<span class="token operator">*</span>base<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>可以看到，有相同的代码语句，所以进行如下缩减</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fastpow2</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> base<span class="token punctuation">,</span><span class="token keyword">long</span> <span class="token keyword">long</span> power<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>power<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>power<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span>		<span class="token comment">//如果power为奇数</span>
        <span class="token punctuation">{</span>
            result<span class="token operator">*=</span>base<span class="token punctuation">;</span>
            power<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        power<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">;</span>
        base<span class="token operator">=</span>base<span class="token operator">*</span>base<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>因为power为整数类型，如果为奇数可以自动舍去0.5</p> <p>例如power=3，power/2结果为1，与power--;power/=2;结果相同</p> <p>所以继续优化</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fastpow3</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> base<span class="token punctuation">,</span><span class="token keyword">long</span> <span class="token keyword">long</span> power<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>power<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>power<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span>
    		result<span class="token operator">*=</span>base<span class="token punctuation">;</span>
        power<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">;</span>
    	base<span class="token operator">=</span>base<span class="token operator">*</span>base<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>前面说到，指数的结果非常大，所以常用到取模运算</p> <p>这里用到性质</p> <p>(a*b)%c=(a%c*b%c)%c</p> <p>所以代码如下：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fastpow4</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> base<span class="token punctuation">,</span><span class="token keyword">long</span> <span class="token keyword">long</span> power<span class="token punctuation">,</span><span class="token keyword">int</span> mod<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>power<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>power<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span>
    		result<span class="token operator">=</span><span class="token punctuation">(</span>result<span class="token operator">*</span>base<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
        power<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">;</span>
    	base<span class="token operator">=</span><span class="token punctuation">(</span>base<span class="token operator">*</span>base<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这大概就是最终的写法了，但是其中的一些地方我们可以改为位运算，速度更快</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">long</span> <span class="token keyword">long</span>  <span class="token function">fastPower5</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span>  base<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">long</span>  power<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">long</span>  mod<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">long</span> <span class="token keyword">long</span>  result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>power <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>power <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>			<span class="token comment">//如果power为奇数</span>
			result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">*</span> base<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>
		power <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		base <span class="token operator">=</span> <span class="token punctuation">(</span>base <span class="token operator">*</span> base<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>总结一下</p> <p>pow效率较低，但是适用于指数为小数的情况</p> <p>否则不建议使用</p> <p>循环复杂度为O(n),快速幂算法复杂度为O(logn)</p> <p>指数越大，效果越明显</p> <p>回到分元宵的问题</p> <p>最大的坑是输入的四个数据可能有0，需要单独判断，否则通过率为98%。</p> <p>最后，题目的答案</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
ll A<span class="token punctuation">;</span>
ll <span class="token function">fastPower</span><span class="token punctuation">(</span>ll base<span class="token punctuation">,</span> ll power<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	ll c<span class="token punctuation">,</span> o<span class="token punctuation">,</span> w<span class="token punctuation">,</span> e<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> c <span class="token operator">&gt;&gt;</span> o <span class="token operator">&gt;&gt;</span> w <span class="token operator">&gt;&gt;</span> e <span class="token operator">&gt;&gt;</span> A<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> o <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> w <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> e <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">fastPower</span><span class="token punctuation">(</span><span class="token function">fastPower</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">%</span> A<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>o <span class="token operator">%</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> A<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
ll <span class="token function">fastPower</span><span class="token punctuation">(</span>ll base<span class="token punctuation">,</span> ll power<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	ll result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>power <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>power <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>
			result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">*</span> base<span class="token punctuation">)</span> <span class="token operator">%</span> A<span class="token punctuation">;</span>
		power <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		base <span class="token operator">=</span> <span class="token punctuation">(</span>base <span class="token operator">*</span> base<span class="token punctuation">)</span> <span class="token operator">%</span> A<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020年9月16日星期三晚上11点14分</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a5ec0a2d.js" defer></script><script src="/assets/js/2.785c97dd.js" defer></script><script src="/assets/js/20.602915c9.js" defer></script>
  </body>
</html>
